var RadioGroupComponent=React.createClass({displayName:"RadioGroupComponent",handleChange:function(a,b){this.props.itemValue.value=this.props.itemValue.value.map(function(a){return{id:a.id,name:a.name,selected:a.id===b}},this),this.props.handleStateChange(a,this.props.itemValue)},render:function(){var a=this.props.itemKey,b=this.props.itemValue,c=b.value.map(function(b){return React.DOM.div({className:"radio"},React.DOM.label(null,React.DOM.input({type:"radio",name:a,id:b.id,value:b.id,checked:b.selected,onChange:this.handleChange.bind(this,a,b.id)}),b.name))},this);return React.DOM.div({className:"form-group"},React.DOM.label({className:"control-label col-sm-3",htmlFor:a},b.name),React.DOM.div({className:"col-sm-7"},c))}}),TextBoxComponent=React.createClass({displayName:"TextBoxComponent",handleChangeInTextBox:function(a,b){this.props.itemValue.value=b.target.value,this.props.handleStateChange(a,this.props.itemValue)},_getLabelForItem:function(a){return a.required?a.name:a.name+" (optional)"},_getInput:function(){var a=this.props.itemKey,b=this.props.itemValue;return React.DOM.div({className:"form-group"},React.DOM.label({className:"control-label col-sm-3",htmlFor:a},this._getLabelForItem.call(this,b)),React.DOM.div({className:"col-sm-7"},React.DOM.input({className:"form-control",name:a,id:a,value:b.value,required:b.required,onChange:this.handleChangeInTextBox.bind(this,a)})))},render:function(){return this._getInput()}}),StaticComponent=React.createClass({displayName:"StaticComponent",render:function(){var a=this.props.itemKey,b=this.props.itemValue;return React.DOM.div({className:"form-group"},React.DOM.label({className:"control-label col-sm-3",htmlFor:a},b.name),React.DOM.div({className:"col-sm-7"},React.DOM.p({className:"form-control-static"},b.value)))}}),BankManagement=React.createClass({displayName:"BankManagement",getInitialState:function(){return{country:{name:"Country",required:!0,value:"India"},mode_of_payment:{name:"Mode of Payment",required:!0,value:[{id:"online",name:"Net Banking",selected:!0},{id:"cheque",name:"Cheque",selected:!1}]},beneficiary_name:{name:"Beneficiary Name",required:!0,value:""},account_number:{name:"Account Number",required:!0,value:""},bank_name:{name:"Bank Name",required:!0,value:""},bank_branch:{name:"Bank Branch",required:!0,value:""},bank_address:{name:"Bank Address",required:!0,value:""},ifsc_code:{name:"IFSC Code",required:!0,value:""},pan_number:{name:"PAN Number",required:!1,value:""}}},componentWillMount:function(){$.getJSON("/api/guru/bank",function(a){a&&(_.each(_.keys(a),function(b){"mode_of_payment"===b?this.state[b].value=_.map(this.state[b].value,function(c){return c.selected=c.id===a[b],c},this):this.state[b]&&(this.state[b].value=a[b])},this),this.setState(this.state))}.bind(this)),$.getJSON("/api/guru/user",function(a){a&&(mixpanel.identify(a.email),mixpanel.people.set({$email:a.email,$name:a.name,$last_login:new Date}),mixpanel.track("Visited Bank page"))}.bind(this))},handleStateChange:function(a,b){var c={};c[a]=b,this.setState(c)},_getFormComponents:function(){return _.keys(this.state).map(function(a){switch(a){case"mode_of_payment":return RadioGroupComponent({itemKey:a,itemValue:this.state[a],handleStateChange:this.handleStateChange});case"country":return StaticComponent({itemKey:a,itemValue:this.state[a]});default:return TextBoxComponent({itemKey:a,itemValue:this.state[a],handleStateChange:this.handleStateChange})}},this)},handleNewCourseFormSubmit:function(a){a.preventDefault();var b={};_.each(_.keys(this.state),function(a){b[a]="mode_of_payment"===a?_.find(this.state[a].value,function(a){return a.selected}).id:this.state[a].value},this),$.post("/api/guru/bank",b,function(a){a&&$(this.getDOMNode()).find('[type="submit"]').toggleClass("btn-success btn-primary").html("Saved")}.bind(this))},render:function(){return React.DOM.div({className:"has-min-height"},React.DOM.h3(null,"Bank Details"),React.DOM.p({className:"text-light gwg-callout gwg-callout-info mb-30"}," Enter correct information here to ensure timely payments to your account. "),React.DOM.form({className:"form-horizontal",role:"form",onSubmit:this.handleNewCourseFormSubmit},this._getFormComponents(),React.DOM.div({className:"form-group"},React.DOM.div({className:"col-sm-offset-3 col-sm-9"},React.DOM.button({type:"submit",className:"btn btn-success"},"Save")))))}});React.renderComponent(BankManagement(null),document.getElementById("bankManagement"));