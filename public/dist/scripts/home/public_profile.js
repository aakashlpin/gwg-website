var BootstrapButton,BootstrapModal,Course,Courses,Schedule,SoundCloud,UserHelpers,Youtube;UserHelpers={getUserName:function(){return window.location.pathname.split("/")[1]}},BootstrapButton=React.createClass({render:function(){return this.transferPropsTo(React.DOM.a({role:"button",className:"btn"},this.props.children))}}),BootstrapModal=React.createClass({componentDidMount:function(){return $(this.getDOMNode()).modal({backdrop:"static",show:!1}).on("shown.bs.modal",this.handleModalShown).on("hidden.bs.modal",this.handleModalClose)},close:function(){return $(this.getDOMNode()).modal("hide")},open:function(){return $(this.getDOMNode()).modal("show")},render:function(){var a,b;return b=null,a=null,this.props.confirm&&(b=BootstrapButton({onClick:this.handleConfirm,className:"btn-primary"},this.props.confirm)),this.props.cancel&&(a=BootstrapButton({onClick:this.handleCancel},this.props.cancel)),React.DOM.div({className:"modal fade"},React.DOM.div({className:"modal-dialog modal-md"},React.DOM.div({className:"modal-content"},React.DOM.div({className:"modal-header"},React.DOM.h3({className:"m-0"},this.props.title)),React.DOM.div({className:"modal-body",id:this.props.id}),React.DOM.div({className:"modal-footer"},a,b))))},handleModalClose:function(){return $(this.getDOMNode()).find(".modal-body").empty()},handleModalShown:function(){var a;return"function"==typeof(a=this.props).onShown?a.onShown():void 0},handleCancel:function(){var a;return"function"==typeof(a=this.props).onCancel?a.onCancel():void 0},handleConfirm:function(){var a;return"function"==typeof(a=this.props).onConfirm?a.onConfirm():void 0}}),Course=React.createClass({reserveSlots:function(){return $(this.getDOMNode()).find(".has-action").toggleClass("btn-primary btn-warning").find("span").html("Reserving.. "),this.refs.modal.open()},handleCancel:function(){return $(this.getDOMNode()).find(".has-action").toggleClass("btn-primary btn-warning").find("span").html("Reserve "),this.refs.modal.close()},handleModalShown:function(){return React.renderComponent(Schedule({classes:this.props.course.classes,courseId:this.props.course._id}),document.getElementById(this.modalId))},render:function(){var a,b,c,d;return this.modalId="modal_"+this.props.course._id,d="Reserve slots - "+this.props.course.name,c=BootstrapModal({ref:"modal",confirm:"Done",cancel:"Go back",onConfirm:this.handleConfirm,onCancel:this.handleCancel,onShown:this.handleModalShown,title:d,id:this.modalId}),b=function(a){return"beg"===a?React.DOM.span({className:"audience-item beg",title:"Level: Beginner"},"B"):"inter"===a?React.DOM.span({className:"audience-item inter",title:"Level: Intermediate"},"I"):React.DOM.span({className:"audience-item adv",title:"Level: Advanced"},"A")},a=this.props.course.target_audience.map(function(){return function(a){return a.selected?React.DOM.li({className:"item"},b(a.id)):void 0}}(this)),React.DOM.li({className:"item"},React.DOM.div({className:"clearfix"},React.DOM.div({className:"pull-left"},React.DOM.h4({className:"item-heading display-ib"},this.props.course.name),React.DOM.ul({className:"l-h-list display-ib guru-audience-list"},a),React.DOM.div(null,React.DOM.h5({className:"text-charcoal"},"Sessions: ",React.DOM.strong(null,this.props.course.classes)," | Fee : ",React.DOM.strong(null,React.DOM.i({className:"fa fa-rupee"}),this.props.course.fee)))),React.DOM.div({className:"pull-right"},React.DOM.button({ref:"reserveBtn",className:"btn btn-primary has-action",onClick:this.reserveSlots},React.DOM.span(null,"Reserve "),React.DOM.i({className:"fa fa-headphones"})))),c)}}),Courses=React.createClass({mixins:[UserHelpers],getInitialState:function(){return{courses:[]}},componentWillMount:function(){return $.getJSON("/api/public/courses",{username:this.getUserName()},function(a){return function(b){return a.setState({courses:b})}}(this))},render:function(){var a;return a=this.state.courses.map(function(a){return Course({course:a})}),React.DOM.div({className:"schedule-container"},React.DOM.h4({className:"text-heading"},"Learn"),React.DOM.ul({className:"list-guru-courses list-unstyled"},a))}}),Schedule=React.createClass({mixins:[UserHelpers],getDefaultProps:function(){return{selectedClasses:0}},getInitialState:function(){return{slots:[]}},componentWillMount:function(){return $.getJSON("/api/public/schedule",{username:this.getUserName()},function(a){return function(b){return a.setState({slots:b})}}(this))},componentDidUpdate:function(){var a;return a=$(this.getDOMNode()).find(".schedule-calendar"),a.fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},defaultView:"month",editable:!1,events:this.state.slots,eventClick:function(b){return function(c){var d;if(d=!0,"Available"===c.title){if(b.props.selectedClasses===b.props.classes)return d=!1,void noty({layout:"topCenter",text:"Max classes chosen. Save and proceed",timeout:2500,type:"warning",killer:!0});c.title="Selected",c.color="#e67e22",b.props.selectedClasses+=1}else c.title="Available",c.color="#3a87ad",b.props.selectedClasses-=1;return b.props.selectedClasses===b.props.classes&&noty({layout:"topCenter",text:"w00t! "+b.props.classes+" classes selected. Save and proceed",type:"success",killer:!0}),d?($(b.getDOMNode()).find(".schedule-classes").html(b.props.selectedClasses),a.fullCalendar("updateEvent",c)):void 0}}(this)})},render:function(){return this.scheduleMessageId="schedule-messages_"+this.props.courseId,React.DOM.div(null,React.DOM.h5(null," Selected ",React.DOM.span({className:"schedule-classes"},this.props.selectedClasses)," of ",this.props.classes),React.DOM.div({className:"schedule-calendar"}))}}),Youtube=React.createClass({mixins:[UserHelpers],getInitialState:function(){return{youtube:[]}},componentWillMount:function(){var a;return a=this.getUserName(),$.getJSON("/api/public/youtube",{username:a},function(a){return function(b){return a.setState({youtube:b})}}(this))},componentDidUpdate:function(){var a;return a=this.state.youtube.map(function(a){return a.enabled?{title:a.title,href:"http://www.youtube.com/watch?v="+a.videoId,type:"text/html",youtube:a.videoId,poster:"https://img.youtube.com/vi/"+a.videoId+"/0.jpg"}:!1}),a=_.reject(a,function(a){return!a}),blueimp.Gallery(a,{container:"#blueimp-video-carousel",carousel:!0})},render:function(){return React.DOM.div(null,React.DOM.h3({className:"text-heading text-center mb-30"},"On Youtube"),React.DOM.div({id:"blueimp-video-carousel",className:"blueimp-gallery blueimp-gallery-controls blueimp-gallery-carousel"},React.DOM.div({className:"slides"}),React.DOM.h3({className:"title"}),React.DOM.a({className:"prev"},"‹"),React.DOM.a({className:"next"},"›"),React.DOM.a({className:"play-pause"})))}}),SoundCloud=React.createClass({mixins:[UserHelpers],getInitialState:function(){return{soundcloud:{connected:!1,permalink_url:"",is_shown:!1}}},render:function(){return React.DOM.div(null,React.DOM.h3({className:"text-heading text-center mb-30"},"On SoundCloud"),React.DOM.div({id:"embedSoundCloudWidget"}))},componentWillMount:function(){var a;return a=this.getUserName(),$.getJSON("/api/public/soundcloud",{username:a},function(a){return function(b){return a.setState({soundcloud:b})}}(this))},componentDidUpdate:function(){var a;return a=$(this.getDOMNode()).find("#embedSoundCloudWidget"),this.state.soundcloud.connected?SC.oEmbed("https://soundcloud.com/mad-orange-fireworks",function(b){return a.html(b.html)}):void 0}}),React.renderComponent(SoundCloud({}),document.getElementById("widget-soundcloud")),React.renderComponent(Youtube({}),document.getElementById("widget-youtube")),React.renderComponent(Courses({}),document.getElementById("widget-courses"));